<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>注册 - 微社区</title>
</head>
<body style="background:#f4f4f7; font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; margin:0;">
    <div style="background:white; padding:30px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); width:350px;">
        <h2 style="text-align:center; color:#333;">新用户注册</h2>
        
        <div style="text-align:center; margin-bottom:20px;">
            <img id="avatar_preview" src="https://via.placeholder.com/80" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:2px solid #007bff;">
            <br>
            <input type="file" id="file_input" onchange="previewAvatar(event)" style="font-size:12px; margin-top:10px;">
        </div>

        <input type="text" id="nick" placeholder="昵称" style="width:100%; padding:10px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;">
        <input type="text" id="user" placeholder="账号" style="width:100%; padding:10px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;">
        <input type="password" id="pwd" placeholder="密码" style="width:100%; padding:10px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;">
        <input type="password" id="pwd_confirm" placeholder="确认密码" style="width:100%; padding:10px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px; box-sizing:border-box;">
        
        <button onclick="doRegister()" style="width:100%; padding:12px; background:#007bff; color:white; border:none; border-radius:4px; cursor:pointer; font-size:16px;">注册</button>
        
        <p style="text-align:center; font-size:14px; color:#666; margin-top:15px;">
            已有账号？<a href="login.html" style="color:#007bff; text-decoration:none;">去登录</a>
        </p>
    </div>

    <script src="client.js"></script>
    <script>
        function previewAvatar(e) {
            const reader = new FileReader();
            reader.onload = () => document.getElementById('avatar_preview').src = reader.result;
            reader.readAsDataURL(e.target.files[0]);
        }

        function doRegister() {
            const p1 = document.getElementById('pwd').value;
            const p2 = document.getElementById('pwd_confirm').value;
            if (p1 !== p2) return alert('两次密码不一致');
            authAction('register');
        }
    </script>
</body>
</html>